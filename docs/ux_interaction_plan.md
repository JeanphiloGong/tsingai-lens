# 科研助手交互逻辑（大师级）

## 问题概述
- 新用户不知道第一步该做什么。
- 当前流程要求：上传 → 解析 → 下载配置 → 手动配置 → 导出图谱，路径过长。
- 目标是：以“集合”为核心，空则引导上传；进集合后提供检索入口与图谱导出。

## 体验原则
- 每个页面只给一个主动作。
- 复杂配置后置，默认自动化。
- 明确显示状态与下一步行动。
- 以“结果视角”组织内容：可问、可看、可导出。

## 信息架构
- 首页：集合列表
- 集合详情：概览 / 文档 / 检索 / 图谱 / 报告 / 设置
- 系统：运行记录与日志（只读）

## 核心用户旅程
### 1) 首次进入（空集合）
1. 首页展示空状态与单一 CTA：创建集合。
2. 创建弹窗：集合名、可选描述、默认配置开关。
3. 上传步骤：拖拽批量 PDF。
4. 上传完成后自动索引。
5. 成功后跳转到集合概览，提示下一步：检索或导出图谱。

### 2) 追加论文
1. 集合 > 文档。
2. 点击“添加文件”。
3. 弹窗询问：立即索引？
   - 增量更新（推荐）
   - 全量重建
4. 索引进度可见，集合仍可浏览。

### 3) 检索入口
1. 集合 > 检索。
2. 单输入框，提示示例问题。
3. 结果结构化输出：
   - 结论摘要
   - 证据列表（对应论文与原文片段）
   - 关联社区
4. 可操作：打开来源、导出结果。

### 4) 图谱导出
1. 集合 > 图谱。
2. 两个主操作：
   - 下载 GraphML
   - 过滤后导出（节点数、最小权重、社区）
3. 小型摘要卡片：节点数、边数、社区数。
4. 内联提示 Gephi 导入与布局建议。

### 5) 报告与规律
1. 集合 > 报告，列表展示社区摘要与规模。
2. 点击社区查看：
   - 概要
   - 关键实体
   - 相关论文
3. 可操作：
   - 导出社区子图
   - 在当前社区内检索

## 屏幕级交互逻辑
### 首页：集合列表
- 表格字段：集合名、状态、文档数、实体数、最近更新。
- 主按钮：创建集合。
- 行操作：打开、快速导出、更新索引。

### 集合概览
- 指标卡片：论文数、实体数、关系数、社区数。
- 状态徽标：空、索引中、失败、可用。
- 下一步动作：检索、导出、上传。

### 文档
- 文件列表：状态、处理时间、失败原因。
- 批量上传进度条，失败可重试。

### 检索
- 单输入框，强调“基于论文证据”。
- 默认非聊天模式，结果结构化呈现。

### 图谱
- 导出与过滤按钮固定在顶部。
- 展示当前图谱状态与更新时间。

### 设置
- 默认配置开关。
- 高级设置折叠面板：
  - LLM 端点
  - Embeddings
  - 聚类与图布局

## 后端影响（MVP 需要）
### 可直接复用
- `POST /retrieval/index/upload`
- `POST /retrieval/index`
- `GET /retrieval/graphml`

### 最小新增能力
- 集合列表与统计
- 文档列表与状态
- 运行历史与状态
- 检索接口（Ask）
- 图谱导出增加社区字段用于着色

## MVP 清单
- 集合列表 + 空状态引导
- 批量上传 + 自动索引
- 检索入口（非聊天）
- GraphML 导出（可过滤）

## 成功指标
- 首次用户到“可导出图谱”的时间
- 进入集合后至少一次检索的比例
- 索引成功率与失败原因分布

## 后续增强（可选）
- 完整对话式问答
- 内置图谱预览
- 跨集合检索
